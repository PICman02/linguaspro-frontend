 import { protectAction, getUser } from "./guards.js";  const API_URL = (window.__API_URL__ || window.API_URL || "http://localhost:5001/api").replace(/\/api$/, ""); // backend  // Serviços Dinâmicos const newServices = [  {   título: "Aulas Online Personalizadas",   descrição: "Aulas individuais via Zoom adaptadas ao seu nível e objetivo.",   preco: "MZN 150/hora",   badge: "",   tag: "Individual",   icon: "bi-laptop"  },  {   título: "Tradução Juramentada",   descrição: "Documentos oficiais com certificação legal.",   preco: "MZN 800/página",   badge: "Novo",   tag: "Por página",   icon: "bi-file-earmark-text"  } ];  const servicesContainer = document.getElementById("services-container");  // Adiciona serviços adicionais sem apagar existentes newServices.forEach(s => {  const card = document.createElement("div");  card.classList.add("col-lg-4");  card.innerHTML = `   <div class="card service-card h-100 border-0 shadow-lg position-relative">    ${s.badge ? `<div class="card-header position-absolute top-0 start-50 translate-middle"><span class="badge bg-danger px-3 py-2">${s.badge}</span></div>` : ""}    <div class="card-body p-4">     <div class="icon-wrapper mb-4"><i class="bi ${s.icon} text-primary fs-1"></i></div>     <h3 class="card-title h4 mb-3">${s.título}</h3>     <p class="card-text text-muted mb-4">${s.descrição}</p>     <div class="d-flex justify-content-between align-items-center mb-3">      <span class="h5 fw-bold text-primary mb-0">${s.preco}</span>      <span class="badge bg-light text-dark">${s.tag || ''}</span>     </div>     <button class="btn btn-primary w-100" data-service="${s.título}">      <i class="bi bi-cart-plus me-2"></i>Solicitar Orçamento     </button>    </div>   </div>  `;  servicesContainer.appendChild(card); });  // Função para enviar orçamento para backend async function enviarOrcamento(servico) {  const user = getUser();   if (!user) {   alert("Você precisa estar logado para solicitar um orçamento.");   window.location.href = "login.html";   return;  }   const detalhes = prompt("Descreva seu projeto:") || "";   const requestData = {   userId: user.id,   nome: user.name || "",   email: user.email || "",   telefone: user.phone || "",   servico,   detalhes  };   try {   const res = await fetch(`${API_URL}/orcamentos`, {    method: "POST",    headers: {     "Content-Type": "application/json",     "Authorization": `Bearer ${localStorage.getItem("token") || sessionStorage.getItem("token")}`    },    body: JSON.stringify(requestData)   });    const data = await res.json();    if (res.ok) {    alert("Solicitação enviada com sucesso! Em breve entraremos em contato.");   } else {    alert(data.message || "Erro ao enviar solicitação");   }  } catch (err) {   console.error(err);   alert("Erro ao se comunicar com o servidor");  } }  // Protege a função para apenas usuários logados export const solicitarOrcamento = protectAction(enviarOrcamento); window.solicitarOrcamento = solicitarOrcamento;  // Inicializa os botões dinâmicos document.addEventListener("DOMContentLoaded", () => {  const buttons = document.querySelectorAll("button[data-service]");  buttons.forEach(btn => {   const servico = btn.getAttribute("data-service");   btn.addEventListener("click", () => solicitarOrcamento(servico));  }); });  