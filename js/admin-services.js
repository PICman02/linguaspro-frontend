const API_BASE = window.__API_URL__ || window.API_URL || "http://localhost:5001/api"; const table = document.querySelector("#serviceTable tbody"); function getAdminToken() {  return localStorage.getItem("admin_token"); } async function api(path, options = {}) {  const token = getAdminToken();  const headers = {   "Content-Type": "application/json",   ...(options.headers || {}),   ...(token ? { Authorization: `Bearer ${token}` } : {}),  };  const response = await fetch(`${API_BASE}${path}`, { ...options, headers });  const data = await response.json().catch(() => ({}));  if (!response.ok) throw new Error(data.error || `HTTP ${response.status}`);  return data; } function rowTemplate(item) {  const payLabel = item.payment_status === "paid" ? "Pago" : "Nao pago";  return `   <tr>    <td class="border px-4 py-2">${item.student_name}</td>    <td class="border px-4 py-2">${item.student_email}</td>    <td class="border px-4 py-2">${item.course_title || item.course_id}</td>    <td class="border px-4 py-2">${item.status}</td>    <td class="border px-4 py-2">${payLabel}</td>   </tr>  `; } async function loadRows() {  if (!getAdminToken()) {   alert("Faca login no dashboard admin primeiro.");   window.location.href = "dashboard-admin.html";   return;  }  const data = await api("/enrollments");  const rows = data.enrollments || [];  table.innerHTML = rows.length ? rows.map(rowTemplate).join("") : "<tr><td colspan='5' class='border px-4 py-2'>Sem registos</td></tr>"; } window.addEventListener("DOMContentLoaded", () => {  loadRows().catch((error) => {   table.innerHTML = `<tr><td colspan='5' class='border px-4 py-2'>Erro: ${error.message}</td></tr>`;  }); }); 